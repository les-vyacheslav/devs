(()=>{"use strict";function e(e,t=0){if(!document.body.classList.contains("locked")){const s=window.innerWidth-document.documentElement.clientWidth+"px";document.body.classList.add("locked"),document.body.style.paddingRight=s,e.forEach((e=>{e.style.paddingRight=s}));let o=document.createElement("div");o.className="scroller disable-pointer",document.body.append(o),setTimeout((function(){o.classList.remove("disable-pointer")}),t)}}function t(e,t=0){if(document.body.classList.contains("locked")){const s=document.querySelector(".scroller");s?.classList.add("disable-pointer"),setTimeout((function(){document.body.classList.remove("locked"),document.body.style.paddingRight="0px",e.forEach((e=>{e.style.paddingRight="0px"})),s?.remove()}),t)}}const s=new class{constructor(e){this.linkAttributeName=e.linkAttributeName,this.popupAttributeName=e.popupAttributeName,this.popupContentClassName=e.popupContentClassName,this.openedPopupClassName=e.openedPopupClassName,this.popupCloseButtonClassName=e.popupCloseButtonClassName,this.lockPaddingElementClassName=e.lockPaddingElementClassName,this.showHideTime=e.showHideTime,this.video=e.video}addVideo(e,t,s,o,l){if(e.getAttribute(this.popupAttributeName)==t&&!e.querySelector("video")){const t=document.createElement("source");t.setAttribute("src",o),t.setAttribute("type","video/mp4");const i=document.createElement("source");i.setAttribute("src",l),i.setAttribute("type","video/ogg");const n=document.createElement("video");n.className=s.slice(1),n.setAttribute("autoplay","autoplay"),n.setAttribute("controls","controls"),n.append(t),n.append(i),e.querySelector(this.popupContentClassName)?.append(n)}}getPopup(e){return document.querySelector(`[${this.popupAttributeName}="${e}"]`)}openPopup(t){if("string"==typeof t&&(t=this.getPopup(t)),!t)return;const s=document.querySelector(this.openedPopupClassName);s?this.closePopup(s,!1):e(document.querySelectorAll(this.lockPaddingElementClassName),this.showHideTime),t.classList.add(this.openedPopupClassName.slice(1)),this.video?.forEach((e=>{this.addVideo(t,e.popupName,e.videoClassName,e.mp4Path,e.ogvPath)}))}closePopup(e,s=!0){setTimeout((()=>{e?.querySelectorAll("video").forEach((e=>e.pause())),e?.querySelectorAll("form").forEach((e=>e.reset()))}),this.showHideTime),e?.classList.remove(this.openedPopupClassName.slice(1));const o=document.querySelectorAll(this.lockPaddingElementClassName);s&&t(o,this.showHideTime)}init(){const e=this.linkAttributeName,t=this.popupAttributeName,s=this.popupContentClassName,o=this.openedPopupClassName,l=this.popupCloseButtonClassName,i=document.querySelectorAll(`[${e}]`),n=document.querySelectorAll(`[${t}]`),a=document.querySelectorAll(l);i.forEach((s=>{s.addEventListener("click",(()=>{const o=s.getAttribute(e),l=document.querySelector(`[${t}="${o}"]`);this.openPopup(l)}))})),a.forEach((e=>{e.addEventListener("click",(()=>{this.closePopup(e.closest(`[${t}]`))}))})),n.forEach((e=>{e.addEventListener("click",(e=>{e.target.closest(s)||this.closePopup(e.target.closest(`[${t}]`))}))})),document.addEventListener("keydown",(e=>{if(27===e.which){const e=document.querySelector(o);this.closePopup(e)}}))}}({linkAttributeName:"data-popup",popupAttributeName:"data-popup-name",popupContentClassName:".popup__content",openedPopupClassName:".popup_opened",popupCloseButtonClassName:".popup__close",lockPaddingElementClassName:".lock-padding",showHideTime:300});new class{constructor(e){this.lockingElementClassName=e.lockingElementClassName,this.lockedClassName=e.lockedClassName,this.intersectingClassName=e.intersectingClassName,this.unlockDelay=e.unlockDelay}lockElements(e,{lockingElementClassName:t,lockedClassName:s,intersectingClassName:o,unlockDelay:l}){const i=document.getElementById(e?.[0].slice(1));i&&document.querySelectorAll(t).forEach((t=>{t.closest(e[0])||(t.classList.add(s.slice(1)),setTimeout((()=>{t.classList.remove(s.slice(1));const e=t.getBoundingClientRect().top;e>=i.getBoundingClientRect().bottom&&e<document.documentElement.clientHeight-.1*t.offsetHeight&&t.classList.add(o.slice(1))}),l))}))}init(){window.addEventListener("load",(()=>{const e=window.location.hash.match(/^#(.*)/);this.lockElements(e,this)})),document.querySelectorAll('[href*="#"]').forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("href").match(/#(.*)$/);this.lockElements(t,this)}))}))}}({lockingElementClassName:".observing",lockedClassName:".observing_locked",intersectingClassName:".observing_shown",unlockDelay:1e3}).init(),new class{constructor(e){this.elementClassName=e.elementClassName,this.scrolledClassName=e.scrolledClassName}onScroll(e,t){new IntersectionObserver((function(s,o){s[0].isIntersecting?e.classList.remove(t):e.classList.add(t)})).observe(e)}init(){const e=document.querySelector(this.elementClassName),t=this.scrolledClassName.slice(1);e&&this.onScroll(e,t)}}({elementClassName:".header",scrolledClassName:".header_scroll"}).init(),new class{constructor(e){this.buttonClassName=e.buttonClassName,this.activeButtonClassName=e.activeButtonClassName,this.menuClassName=e.menuClassName,this.activeMenuClassName=e.activeMenuClassName,this.menuLinkClassName=e.menuLinkClassName,this.lockPaddingElementClassName=e.lockPaddingElementClassName,this.showHideTime=e.showHideTime}onButtonClick(s,o,l,i,n,a){s&&l&&s.addEventListener("click",(function(){s.classList.contains(o.slice(1))?t(n,a):e(n,a),s.classList.toggle(o.slice(1)),l.classList.toggle(i.slice(1))}))}onLinkClick(e,s,o,l,i,n,a){e&&o&&o.addEventListener("click",(c=>{c.target.closest(i)&&e.classList.contains(s.slice(1))&&(e.classList.remove(s.slice(1)),o.classList.remove(l.slice(1)),t(n,a))}))}init(){window.addEventListener("load",(()=>{const e=document.querySelector(this.buttonClassName),t=this.activeButtonClassName,s=document.querySelector(this.menuClassName),o=this.activeMenuClassName,l=this.menuLinkClassName,i=document.querySelectorAll(this.lockPaddingElementClassName),n=this.showHideTime;this.onButtonClick(e,t,s,o,i,n),this.onLinkClick(e,t,s,o,l,i,n)}))}}({buttonClassName:".burger",activeButtonClassName:".burger_active",menuClassName:".menu__body",activeMenuClassName:".menu__body_active",menuLinkClassName:".menu__link",lockPaddingElementClassName:".lock-padding",showHideTime:300}).init(),s.init(),new class{constructor(e){this.clickableElementConfigs=e}onClick({clickableElementClassName:e,clickedElementClassName:t,duration:s=300,clickCoordinates:o}){const l=window.matchMedia("(any-hover: none)");let i="mousedown",n="mouseup";l.matches&&(i="touchstart",n="touchend"),document.querySelectorAll(e).forEach((e=>{o&&(e.style.setProperty("--x","0px"),e.style.setProperty("--y","0px"),e.style.setProperty("--r","0px"),l.matches||e.addEventListener("mousemove",(t=>{let s=t.offsetX,o=t.offsetY;e.style.setProperty("--hx",s+"px"),e.style.setProperty("--hy",o+"px")}))),e.addEventListener(i,(i=>{if(i.stopPropagation(),e.classList.add(t.slice(1)),o){let t=l.matches?i.changedTouches[0].clientX-e.getBoundingClientRect().left:i.offsetX,s=l.matches?i.changedTouches[0].clientY-e.getBoundingClientRect().top:i.offsetY,o=Math.max(t,s,e.offsetWidth-t,e.offsetHeight-s);e.style.setProperty("--x",t+"px"),e.style.setProperty("--y",s+"px"),e.style.setProperty("--r",o+"px")}window.addEventListener(n,(()=>{setTimeout((()=>{e.classList.remove(t.slice(1))}),s)}),{once:!0})})),e.addEventListener("dragstart",(e=>{e.preventDefault()}))}))}init(){this.clickableElementConfigs.forEach((e=>{this.onClick(e)}))}}([{clickableElementClassName:".start-page__google",clickedElementClassName:".start-page__google_clicked"}]).init()})();